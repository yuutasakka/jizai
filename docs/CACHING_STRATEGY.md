# キャッシュ戦略（BE-5）

## 目的
API応答のレイテンシ低減/コスト削減を行う。正確性を損なわずに短時間のキャッシュを活用。

## 方針
- アプリケーション内キャッシュ（短TTL）: `backend/middleware/cache.mjs`
  - ユーザー非依存のGETに限定（例: `/v1/print-export/options`）
  - TTLのデフォルトは1分、用途に応じて5分まで
- HTTPキャッシュ: `Cache-Control` を設定し、CDN/ブラウザキャッシュも活用
- 失効: 更新の頻度が高いデータはキャッシュ対象外

## 適用例
- `/v1/print-export/options` → 5分キャッシュ
- 将来的候補: 公開のマスターデータ/ティア一覧（仕様上ユーザー非依存であることが条件）

## 注意点
- RLS/ユーザー依存応答には適用しない
- 誤キャッシュの影響を避けるため、保守的なTTLを採用

